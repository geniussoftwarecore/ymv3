# دليل التشغيل الشامل لنظام إدارة ورش يمن الهجين على Windows

**تاريخ**: نوفمبر 2024

**إعداد**: Manus AI

---

## مقدمة

أهلاً بك في دليل التشغيل الشامل لـ **نظام إدارة ورش يمن الهجين**. هذا الدليل مصمم لمساعدتك على تثبيت وإعداد وتشغيل المشروع بالكامل على بيئة Windows المحلية، خطوة بخطوة. سنغطي كل شيء بدءًا من تثبيت الأدوات المطلوبة، مرورًا بتشغيل الخدمات الخلفية (Backend) والواجهة الأمامية (Frontend)، وصولًا إلى استكشاف الأخطاء الشائعة وحلولها.

### لمن هذا الدليل؟

- **المطورون**: الذين يرغبون في المساهمة في تطوير المشروع.
- **مديرو النظام**: المسؤولون عن نشر وتشغيل النظام.
- **المستخدمون المتقدمون**: الذين يرغبون في تجربة النظام محليًا.

### بنية المشروع

يتكون المشروع من ثلاثة أجزاء رئيسية:

1.  **Backend**: مجموعة من الخدمات المصغرة (Microservices) المبنية بـ Python/FastAPI وتعمل داخل حاويات Docker.
2.  **Frontend**: تطبيق شامل مبني بإطار العمل Flutter، ويدعم الويب والجوال.
3.  **Database**: قاعدة بيانات PostgreSQL تعمل أيضًا داخل حاوية Docker.

---

## المرحلة الأولى: إعداد بيئة العمل على Windows

في هذه المرحلة، سنقوم بتثبيت جميع الأدوات والبرامج الأساسية التي ستحتاجها لتشغيل المشروع. يرجى اتباع الخطوات بدقة لضمان عدم مواجهة مشاكل في المراحل التالية.

### 1.1. المتطلبات الأساسية

| الأداة | الإصدار الموصى به | الوصف | الرابط |
|---|---|---|---|
| **Docker Desktop** | 4.0 أو أحدث | لتشغيل الحاويات (Containers) التي تحتوي على الخدمات وقاعدة البيانات. | [docker.com](https://www.docker.com/products/docker-desktop/) |
| **Git for Windows** | 2.30 أو أحدث | نظام التحكم في الإصدارات (Version Control) للحصول على كود المشروع. | [git-scm.com](https://git-scm.com/download/win) |
| **Flutter SDK** | 3.0 أو أحدث | إطار العمل المستخدم لبناء الواجهة الأمامية (Frontend). | [flutter.dev](https://docs.flutter.dev/get-started/install/windows) |
| **Visual Studio Code** | الأحدث | محرر أكواد متقدم مع دعم ممتاز لـ Docker و Flutter. | [code.visualstudio.com](https://code.visualstudio.com/download) |
| **Windows Terminal** | الأحدث | (اختياري) يوفر تجربة سطر أوامر أفضل من Command Prompt التقليدي. | [Microsoft Store](https://www.microsoft.com/en-us/p/windows-terminal/9n0dx20hk701) |

### 1.2. خطوات التثبيت بالتفصيل

#### الخطوة 1: تثبيت Docker Desktop for Windows

Docker هو الأداة الأساسية لتشغيل الخدمات الخلفية وقاعدة البيانات. يستخدم Docker تقنية الحاويات لعزل التطبيقات وبيئاتها، مما يضمن تشغيلها بنفس الطريقة على أي جهاز.

1.  **تفعيل WSL 2**: Docker Desktop على Windows يعتمد على **Windows Subsystem for Linux 2 (WSL 2)**. لتفعيله، افتح PowerShell **كمسؤول (Run as Administrator)** ونفذ الأمر التالي:
    ```powershell
    wsl --install
    ```
    > **ملاحظة**: قد تحتاج إلى إعادة تشغيل جهازك بعد هذه الخطوة.

2.  **تحميل Docker Desktop**: قم بتحميل المثبت من [الموقع الرسمي لـ Docker](https://www.docker.com/products/docker-desktop/).

3.  **تثبيت Docker**: شغل المثبت واتبع التعليمات. تأكد من تحديد خيار **"Use WSL 2 instead of Hyper-V"** إذا ظهر أثناء التثبيت.

4.  **تسجيل الدخول (اختياري)**: بعد انتهاء التثبيت، سيطلب منك Docker Desktop تسجيل الدخول. يمكنك إنشاء حساب مجاني أو تخطي هذه الخطوة.

5.  **التحقق من التثبيت**: افتح Command Prompt أو PowerShell أو Windows Terminal ونفذ الأوامر التالية للتحقق من أن Docker و Docker Compose يعملان بشكل صحيح:
    ```cmd
    docker --version
    docker-compose --version
    ```
    يجب أن ترى أرقام الإصدارات لكل أداة.

#### الخطوة 2: تثبيت Git for Windows

Git هو نظام التحكم في الإصدارات الذي سنستخدمه لتحميل كود المشروع من المستودع (Repository).

1.  **تحميل Git**: قم بتحميل المثبت من [الموقع الرسمي لـ Git](https://git-scm.com/download/win).
2.  **تثبيت Git**: شغل المثبت. يمكنك ترك معظم الإعدادات على وضعها الافتراضي، ولكن تأكد من النقاط التالية:
    - **Choosing the default editor**: اختر Visual Studio Code إذا كان مثبتًا لديك.
    - **Adjusting your PATH environment**: اختر **"Git from the command line and also from 3rd-party software"**. هذا هو الخيار الموصى به.
    - **Configuring the line ending conversions**: اختر **"Checkout Windows-style, commit Unix-style line endings"**. هذا الإعداد مهم جدًا لتجنب المشاكل بين Windows والبيئات الأخرى.

3.  **التحقق من التثبيت**: افتح طرفية جديدة (New Terminal) ونفذ الأمر التالي:
    ```cmd
    git --version
    ```

#### الخطوة 3: تثبيت Flutter SDK

Flutter هو إطار العمل من Google الذي تم استخدامه لبناء الواجهة الأمامية.

1.  **تحميل Flutter SDK**: قم بتحميل آخر إصدار مستقر من [صفحة التثبيت الرسمية](https://docs.flutter.dev/get-started/install/windows).
2.  **استخراج الملفات**: قم بفك ضغط الملف الذي قمت بتحميله في مسار **لا يتطلب صلاحيات مسؤول**، على سبيل المثال: `C:\flutter` (تجنب `C:\Program Files\`).
3.  **إضافة Flutter إلى متغيرات البيئة (PATH)**:
    - في قائمة ابدأ، ابحث عن `env` واختر **"Edit the system environment variables"**.
    - في النافذة التي تظهر، اضغط على **"Environment Variables..."**.
    - تحت **"User variables"**، ابحث عن متغير `Path` واضغط على **"Edit..."**.
    - اضغط على **"New"** وأضف المسار الكامل إلى مجلد `bin` داخل مجلد Flutter، على سبيل المثال: `C:\flutter\bin`.
    - اضغط **"OK"** في جميع النوافذ.

4.  **التحقق من التثبيت**: افتح طرفية **جديدة** ونفذ الأمر التالي:
    ```cmd
    flutter doctor
    ```
    هذا الأمر سيقوم بفحص بيئتك وإخبارك بأي متطلبات ناقصة (مثل Android Studio أو Chrome). للمشروع الحالي، يكفي أن يكون لديك **Chrome** مثبتًا لتشغيل نسخة الويب.

#### الخطوة 4: تثبيت Visual Studio Code

VS Code هو محرر أكواد قوي ويوفر دعمًا ممتازًا لـ Flutter و Docker من خلال الإضافات.

1.  **تحميل VS Code**: قم بالتحميل من [الموقع الرسمي](https://code.visualstudio.com/download).
2.  **تثبيت VS Code**: شغل المثبت واتبع التعليمات.
3.  **تثبيت الإضافات الموصى بها**: بعد فتح VS Code، انتقل إلى قسم الإضافات (Extensions) وابحث عن الإضافات التالية وقم بتثبيتها:
    - `Flutter` (Dart-Code.flutter)
    - `Docker` (ms-azuretools.vscode-docker)
    - `Python` (ms-python.python)

### 1.3. الحصول على كود المشروع

الآن بعد أن أصبحت بيئة العمل جاهزة، حان الوقت للحصول على ملفات المشروع.

1.  **افتح Windows Terminal** أو Git Bash.
2.  **انتقل إلى المجلد** الذي ترغب في حفظ المشروع فيه، على سبيل المثال `C:\Projects`.
    ```cmd
    cd C:\Projects
    ```
3.  **استنسخ المستودع (Clone the repository)** باستخدام Git. (استبدل `<repository-url>` بالرابط الفعلي للمشروع):
    ```cmd
    git clone <repository-url>
    ```
4.  **افتح المشروع في VS Code**:
    ```cmd
    cd yaman_workshop_system
    code .
    ```
    هذا الأمر سيفتح المجلد الحالي في VS Code.

---

**تهانينا!** لقد أكملت المرحلة الأولى بنجاح. بيئة عملك الآن جاهزة لتشغيل المشروع. في المرحلة التالية، سنتعلم كيفية تشغيل الخدمات الخلفية (Backend) وقاعدة البيانات باستخدام Docker Compose.


## المرحلة الثانية: تشغيل الخدمات الخلفية (Backend) مع Docker

في هذه المرحلة، سنركز على تشغيل جميع الخدمات الخلفية وقاعدة البيانات. يستخدم المشروع **Docker Compose** لتحديد وتكوين وتشغيل جميع الخدمات معًا بأمر واحد.

### 2.1. فهم بنية Backend

يقع كود الخدمات الخلفية في مجلد `backend/`. يتكون من المكونات التالية:

- **`docker-compose.yml`**: الملف الرئيسي الذي يصف جميع الخدمات، الشبكات، ووحدات التخزين (Volumes) التي يحتاجها المشروع.
- **`services/`**: مجلد يحتوي على كود كل خدمة مصغرة في مجلد منفصل (مثل `user_management`, `work_orders`، إلخ).
- **`.env`**: ملف يحتوي على متغيرات البيئة (Environment Variables) مثل إعدادات قاعدة البيانات ومفاتيح API. **هذا الملف حساس ولا يجب مشاركته.**

### 2.2. إعداد متغيرات البيئة

قبل تشغيل المشروع لأول مرة، تحتاج إلى إنشاء ملف `.env` لتكوين الإعدادات.

1.  **انتقل إلى مجلد `backend`** في الطرفية (Terminal):
    ```cmd
    cd backend
    ```
2.  **انسخ ملف المثال**: المشروع يأتي مع ملف `.env.example` الذي يحتوي على جميع المتغيرات المطلوبة. قم بنسخه لإنشاء ملف `.env` الخاص بك:
    ```cmd
    copy .env.example .env
    ```
3.  **افتح ملف `.env`** في محرر الأكواد (مثل VS Code) وقم بمراجعة الإعدادات. في البداية، يمكنك ترك الإعدادات الافتراضية كما هي، ولكن من المهم فهمها:

    | المتغير | الوصف |
    |---|---|
    | `POSTGRES_DB` | اسم قاعدة البيانات. |
    | `POSTGRES_USER` | اسم المستخدم للاتصال بقاعدة البيانات. |
    | `POSTGRES_PASSWORD` | كلمة المرور للاتصال بقاعدة البيانات. |
    | `SECRET_KEY` | مفتاح سري يستخدم لتوقيع رموز JWT. **يجب تغييره في بيئة الإنتاج!** |
    | `BACKEND_CORS_ORIGINS` | قائمة المصادر المسموح لها بالاتصال بالـ API (مهم لتشغيل الواجهة الأمامية). |

### 2.3. بناء وتشغيل الحاويات

الآن بعد أن تم تكوين كل شيء، يمكننا بناء صور Docker (Docker Images) وتشغيل الحاويات (Containers).

1.  **تأكد من أن Docker Desktop يعمل**: تحقق من أن أيقونة Docker تظهر في شريط المهام وأنها في الحالة الخضراء (Running).
2.  **افتح طرفية (Terminal)** داخل مجلد `backend`.
3.  **نفذ أمر `docker-compose up`**: هذا هو الأمر الرئيسي الذي سيقوم بكل شيء.
    ```cmd
    docker-compose up --build
    ```
    - **`up`**: يقوم بإنشاء وتشغيل الحاويات.
    - **`--build`**: يجبر Docker على بناء الصور من جديد بناءً على ملفات `Dockerfile` الموجودة في كل خدمة. يجب استخدام هذا الخيار في المرة الأولى أو عند إجراء تغييرات على الكود.

    > **ماذا يحدث عند تشغيل هذا الأمر؟**
    > - Docker Compose يقرأ ملف `docker-compose.yml`.
    > - يقوم ببناء صورة Docker لكل خدمة (مثل `user_management`, `postgres`, `nginx`).
    > - يقوم بإنشاء شبكة افتراضية خاصة للخدمات للتواصل مع بعضها البعض.
    > - يقوم بإنشاء وحدات تخزين (Volumes) للحفاظ على بيانات قاعدة البيانات حتى بعد إيقاف الحاويات.
    > - يقوم بتشغيل جميع الحاويات بالترتيب المحدد.

4.  **مراقبة السجلات (Logs)**: سترى سجلات جميع الخدمات تظهر في الطرفية. هذا مفيد جدًا لمراقبة ما يحدث وتصحيح الأخطاء. ابحث عن رسائل تشير إلى أن الخدمات قد بدأت بنجاح، مثل:
    ```
    user_management_1  | INFO:     Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
    postgres_1         | LOG:  database system is ready to accept connections
    ```

### 2.4. التحقق من أن الخدمات تعمل

بعد تشغيل الحاويات، يمكنك التحقق من حالتها بعدة طرق:

#### الطريقة الأولى: Docker Desktop GUI

- افتح واجهة Docker Desktop.
- انتقل إلى قسم **Containers**.
- يجب أن ترى قائمة بجميع حاويات المشروع (مثل `yaman_workshop_system_user_management_1`, `yaman_workshop_system_postgres_1`) وكلها في حالة **Running**.

#### الطريقة الثانية: سطر الأوامر

- افتح طرفية **جديدة** (اترك الطرفية الأولى تعمل لعرض السجلات).
- انتقل إلى مجلد `backend`.
- نفذ الأمر التالي:
    ```cmd
    docker-compose ps
    ```
    هذا الأمر سيعرض لك جدولًا بحالة جميع الخدمات.

#### الطريقة الثالثة: اختبار نقاط النهاية (Endpoints)

يمكنك اختبار ما إذا كانت الخدمات تستجيب للطلبات مباشرة من متصفحك أو باستخدام أداة مثل `curl`.

- **اختبار بوابة Nginx**: افتح متصفحك وانتقل إلى `http://localhost`. يجب أن ترى رسالة ترحيب من Nginx.
- **اختبار خدمة إدارة المستخدمين**: انتقل إلى `http://localhost:8001/docs`. يجب أن ترى واجهة Swagger UI التفاعلية التي توثق جميع نقاط النهاية (Endpoints) الخاصة بخدمة إدارة المستخدمين. يمكنك حتى تجربة إرسال طلبات من هذه الواجهة.

### 2.5. أوامر Docker Compose المفيدة

| الأمر | الوصف |
|---|---|
| `docker-compose up` | إنشاء وتشغيل الحاويات. أضف `-d` للتشغيل في الخلفية (Detached Mode). |
| `docker-compose down` | إيقاف وحذف الحاويات والشبكات. |
| `docker-compose down -v` | نفس الأمر السابق، ولكنه يحذف أيضًا وحدات التخزين (Volumes)، أي **سيتم حذف بيانات قاعدة البيانات**. |
| `docker-compose ps` | عرض حالة جميع الخدمات. |
| `docker-compose logs` | عرض سجلات جميع الخدمات. أضف اسم خدمة (مثل `logs user_management`) لعرض سجلاتها فقط. |
| `docker-compose build` | بناء أو إعادة بناء صور الخدمات. |
| `docker-compose exec <service_name> <command>` | تنفيذ أمر داخل حاوية تعمل. مثال: `docker-compose exec postgres psql -U yaman_user -d yaman_workshop_db`. |

---

**تهانينا!** لقد قمت بتشغيل جميع الخدمات الخلفية بنجاح. في المرحلة التالية، سنتعلم كيفية تشغيل الواجهة الأمامية (Flutter) وربطها بهذه الخدمات.


## المرحلة الثالثة: تشغيل الواجهة الأمامية (Frontend) مع Flutter

الآن بعد أن أصبحت الخدمات الخلفية تعمل، حان الوقت لتشغيل الواجهة الأمامية والتفاعل مع النظام بشكل كامل. الواجهة الأمامية مبنية باستخدام Flutter، مما يسمح بتشغيلها على الويب، سطح المكتب، والجوال من نفس الكود المصدري.

### 3.1. فهم بنية Frontend

يقع كود الواجهة الأمامية في مجلد `frontend/yaman_hybrid_flutter_app/`. أهم الملفات والمجلدات هي:

- **`lib/`**: يحتوي على جميع أكواد Dart الخاصة بالتطبيق.
- **`pubspec.yaml`**: ملف التكوين الرئيسي لـ Flutter. يحدد اسم المشروع، الإصدار، والتبعيات (Dependencies) التي يحتاجها التطبيق (مثل `http`, `provider`).
- **`web/`**: يحتوي على الملفات الخاصة بتشغيل نسخة الويب من التطبيق.
- **`assets/`**: يحتوي على الموارد الثابتة مثل الصور وملفات الترجمة.

### 3.2. تثبيت التبعيات

قبل تشغيل التطبيق لأول مرة، تحتاج إلى تحميل جميع المكتبات والحزم التي يعتمد عليها المشروع، والتي تم تعريفها في ملف `pubspec.yaml`.

1.  **افتح طرفية (Terminal)** في VS Code (Terminal -> New Terminal).
2.  **انتقل إلى مجلد الواجهة الأمامية**:
    ```cmd
    cd frontend\yaman_hybrid_flutter_app
    ```
3.  **نفذ أمر `flutter pub get`**:
    ```cmd
    flutter pub get
    ```
    هذا الأمر سيقوم بقراءة ملف `pubspec.yaml` وتحميل جميع التبعيات المطلوبة إلى جهازك.

### 3.3. تشغيل التطبيق (نسخة الويب)

أسهل طريقة لتشغيل التطبيق واختباره هي من خلال نسخة الويب، والتي تعمل مباشرة في متصفح Chrome.

1.  **تأكد من أنك في مجلد الواجهة الأمامية** في الطرفية.
2.  **تأكد من أن Chrome مثبت** على جهازك.
3.  **نفذ أمر `flutter run`**: هذا هو الأمر الرئيسي لتشغيل تطبيقات Flutter.
    ```cmd
    flutter run -d chrome
    ```
    - **`run`**: يقوم ببناء وتشغيل التطبيق.
    - **`-d chrome`**: يحدد الجهاز المستهدف، وفي هذه الحالة هو متصفح Chrome.

    > **ماذا يحدث عند تشغيل هذا الأمر؟**
    > - Flutter يقوم بتحويل كود Dart إلى JavaScript.
    > - يقوم بتشغيل خادم تطوير محلي (Web Server).
    > - يفتح نافذة جديدة في متصفح Chrome ويعرض التطبيق.

4.  **ميزة Hot Reload**: أثناء تشغيل التطبيق، يمكنك إجراء تغييرات على الكود في VS Code والضغط على `r` في الطرفية لتطبيق التغييرات فورًا دون الحاجة إلى إعادة تشغيل التطبيق بالكامل. هذه إحدى أقوى ميزات Flutter وتسرع عملية التطوير بشكل كبير.

### 3.4. تشغيل التطبيق (نسخة سطح المكتب لـ Windows)

يمكنك أيضًا بناء وتشغيل نسخة أصلية (Native) من التطبيق لسطح مكتب Windows.

1.  **تثبيت أدوات بناء Windows**: لتشغيل نسخة سطح المكتب، ستحتاج إلى تثبيت **"Desktop development with C++"** workload من Visual Studio Installer.
    - افتح Visual Studio Installer (يمكنك البحث عنه في قائمة ابدأ).
    - اضغط **Modify** على نسختك من Visual Studio (إذا لم يكن مثبتًا، قم بتثبيت نسخة Community المجانية).
    - في قسم **Workloads**، حدد **"Desktop development with C++"**.
    - اضغط **Install**.

2.  **تفعيل دعم سطح المكتب في Flutter**:
    ```cmd
    flutter config --enable-windows-desktop
    ```

3.  **تشغيل التطبيق**:
    ```cmd
    flutter run -d windows
    ```
    سيقوم Flutter ببناء التطبيق كملف `.exe` وتشغيله في نافذة منفصلة.

### 3.5. الاتصال بالخدمات الخلفية (Backend)

تم تكوين تطبيق Flutter للاتصال بالـ API Gateway (Nginx) الذي يعمل على `http://localhost`. يمكنك مراجعة إعدادات الاتصال في ملف `lib/core/config/app_config.dart`.

**كيف يتم الاتصال؟**
1.  تطبيق Flutter يرسل طلب HTTP (مثل `GET` أو `POST`) إلى `http://localhost/api/v1/users`.
2.  بوابة Nginx (التي تعمل على المنفذ 80) تستقبل الطلب.
3.  Nginx يقوم بتوجيه الطلب إلى الخدمة المصغرة المناسبة (في هذه الحالة، `user_management` على المنفذ 8001).
4.  الخدمة المصغرة تعالج الطلب وتتصل بقاعدة البيانات إذا لزم الأمر.
5.  الخدمة تعيد الاستجابة إلى Nginx، والذي بدوره يعيدها إلى تطبيق Flutter.

### 3.6. تسجيل الدخول والتفاعل مع النظام

بعد تشغيل التطبيق، يجب أن ترى شاشة تسجيل الدخول. يمكنك استخدام بيانات الاعتماد الافتراضية:

- **البريد الإلكتروني**: `admin@yaman-workshop.com`
- **كلمة المرور**: `admin123`

بعد تسجيل الدخول، يمكنك استكشاف جميع ميزات النظام، مثل لوحة التحكم، إدارة المستخدمين، أوامر العمل، وغيرها.

---

**تهانينا!** لقد قمت بتشغيل المشروع بالكامل، بما في ذلك الخدمات الخلفية والواجهة الأمامية. في المرحلة الأخيرة، سنتناول كيفية استكشاف الأخطاء الشائعة وتقديم بعض النصائح حول الصيانة والأداء.


## المرحلة الرابعة: استكشاف الأخطاء وحلولها (Troubleshooting)

حتى مع اتباع جميع الخطوات بدقة، قد تواجه بعض المشاكل أثناء تشغيل المشروع. هذا القسم مخصص لمساعدتك في تشخيص وحل المشاكل الأكثر شيوعًا.

### 4.1. مشاكل Docker و Docker Compose

| المشكلة | السبب المحتمل | الحل المقترح |
|---|---|---|
| **فشل تشغيل Docker Desktop** | لم يتم تفعيل WSL 2 أو أن هناك تعارضًا مع برنامج آخر. | 1. تأكد من تفعيل WSL 2 (راجع المرحلة 1).<br>2. تأكد من أن Hyper-V معطل إذا كنت تستخدم WSL 2.<br>3. أعد تشغيل جهاز الكمبيوتر. |
| **خطأ `ports are not available` عند تشغيل `docker-compose up`** | هناك خدمة أخرى على جهازك تستخدم نفس المنافذ (مثل 80, 5432, 8001). | 1. أوقف الخدمة التي تستخدم المنفذ.<br>2. قم بتغيير المنفذ في ملف `docker-compose.yml`. على سبيل المثال، غير `"80:80"` إلى `"8080:80"` لتشغيل Nginx على منفذ 8080. |
| **فشل بناء إحدى الخدمات (Build Failure)** | خطأ في `Dockerfile`، مشكلة في الشبكة أثناء تحميل التبعيات، أو عدم توافق في الإصدارات. | 1. اقرأ رسالة الخطأ بعناية لتحديد المشكلة.<br>2. حاول بناء الخدمة بشكل منفصل: `docker-compose build <service_name>`.<br>3. أعد بناء الصور بدون استخدام الكاش: `docker-compose build --no-cache`. |
| **إحدى الحاويات تتوقف فجأة (Exited with code 1)** | خطأ في الكود المصدري للخدمة يمنعها من البدء. | 1. افحص سجلات الحاوية المتوقفة: `docker-compose logs <service_name>`.<br>2. ابحث عن رسالة الخطأ (Error Message) أو تتبع المكدس (Stack Trace) لتحديد سبب المشكلة في الكود. |
| **لا يمكن الاتصال بقاعدة البيانات** | لم تبدأ حاوية `postgres` بشكل صحيح، أو أن إعدادات الاتصال خاطئة. | 1. تأكد من أن حاوية `postgres` تعمل: `docker-compose ps`.<br>2. افحص سجلات `postgres` للتأكد من أنها جاهزة لاستقبال الاتصالات.<br>3. تحقق من أن اسم المستخدم وكلمة المرور واسم قاعدة البيانات في ملف `.env` يطابقون الإعدادات في `docker-compose.yml`. |

### 4.2. مشاكل Flutter

| المشكلة | السبب المحتمل | الحل المقترح |
|---|---|---|
| **فشل أمر `flutter doctor`** | لم يتم إعداد مسار Flutter SDK بشكل صحيح، أو أن هناك متطلبات ناقصة. | 1. تأكد من أن مسار `flutter/bin` موجود في متغيرات البيئة (PATH).<br>2. افتح طرفية جديدة بعد تعديل الـ PATH.<br>3. اتبع التعليمات التي يقدمها `flutter doctor` لتثبيت أي أدوات ناقصة. |
| **فشل أمر `flutter pub get`** | مشكلة في الاتصال بالإنترنت، أو أن هناك تعارضًا في إصدارات التبعيات. | 1. تأكد من أنك متصل بالإنترنت.<br>2. حاول حذف ملف `pubspec.lock` وتشغيل الأمر مرة أخرى.<br>3. قم بترقية Flutter إلى أحدث إصدار: `flutter upgrade`. |
| **التطبيق لا يتصل بالـ Backend (Connection Refused)** | الخدمات الخلفية لا تعمل، أو أن هناك خطأ في عنوان URL للـ API. | 1. تأكد من أن جميع حاويات Docker تعمل بشكل صحيح (راجع القسم 4.1).<br>2. تأكد من أن عنوان URL في تطبيق Flutter صحيح (`http://localhost` أو `http://localhost:80`).<br>3. تحقق من إعدادات `BACKEND_CORS_ORIGINS` في ملف `.env` للتأكد من أنها تسمح بالاتصال من مصدر Flutter. |
| **ظهور شاشة حمراء (Red Screen of Death) في التطبيق** | خطأ برمجي (Exception) في كود Dart. | 1. اقرأ رسالة الخطأ التي تظهر على الشاشة الحمراء.<br>2. افحص نافذة "Debug Console" في VS Code للحصول على تتبع المكدس الكامل للخطأ. |

### 4.3. نصائح عامة للصيانة والأداء

- **تنظيف Docker**: مع مرور الوقت، قد تتراكم الصور والحاويات والشبكات غير المستخدمة وتستهلك مساحة كبيرة على القرص. استخدم الأمر التالي لتنظيفها بشكل آمن:
  ```cmd
  docker system prune -a
  ```
- **تخصيص موارد Docker**: في إعدادات Docker Desktop (Settings -> Resources)، يمكنك زيادة حجم الذاكرة (RAM) وعدد الأنوية (CPUs) المخصصة لـ Docker، مما يمكن أن يحسن أداء الحاويات بشكل كبير. يوصى بتخصيص 4GB من الذاكرة على الأقل.
- **تحديث التبعيات**: قم بتشغيل `flutter pub get` و `docker-compose build` بشكل دوري للحصول على آخر التحديثات الأمنية وتحسينات الأداء للتبعيات والمكتبات المستخدمة في المشروع.
- **استخدام VS Code Debugger**: تعلم كيفية استخدام أدوات تصحيح الأخطاء (Debugger) في VS Code لـ Flutter و Python. تسمح لك بوضع نقاط توقف (Breakpoints) وتتبع تنفيذ الكود خطوة بخطوة، مما يسهل العثور على الأخطاء وإصلاحها.

---

## خاتمة

نأمل أن يكون هذا الدليل قد ساعدك في تشغيل **نظام إدارة ورش يمن الهجين** بنجاح على بيئة Windows المحلية. المشروع كبير ومعقد، ولكن باتباع هذه الخطوات، يجب أن تكون قادرًا على استكشافه والمساهمة في تطويره.

إذا واجهت أي مشاكل لم يتم تناولها في هذا الدليل، فلا تتردد في مراجعة وثائق المشروع أو التواصل مع فريق التطوير.

**شكرًا لك على استخدام نظامنا!**
